<!-- Generated by Ice version 3.6.5 -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>
            Murmur::ServerAuthenticator
        </title>
    </head>
    <body>
        <!-- SwishCommand noindex -->
        <table class="HeaderFooter">
            <tr>
                <td align="left">
                    <table>
                        <tr>
                            <td><a href="../index.html">Home</a></td>
                            <td><a href="../Murmur/Server.html">Previous</a></td>
                            <td><a href="../Murmur.html">Up</a></td>
                            <td><a href="../Murmur/ServerBootedException.html">Next</a></td>
                            <td><a href="../_sindex.html">Index</a></td>
                        </tr>
                    </table>
                </td>
                <td align="center"></td>
                <td align="right"></td>
            </tr>
        </table>
        <!-- SwishCommand index -->
        
        <hr>
        <h1 class="Symbol">Murmur::ServerAuthenticator</h1>
        <h2>Overview</h2>
        <h3 class="Synopsis">interface ServerAuthenticator</h3>
        <p>
Callback interface for server authentication. You need to supply one of these for <a class="Symbol" href="../Murmur/Server.html#setAuthenticator">Server::setAuthenticator</a>.
If an added callback ever throws an exception or goes away, it will be automatically removed.
Please note that unlike <a class="Symbol" href="../Murmur/ServerCallback.html">ServerCallback</a> and <a class="Symbol" href="../Murmur/ServerContextCallback.html">ServerContextCallback</a>, these methods are called
synchronously. If the response lags, the entire murmur server will lag.
Also note that, as the method calls are synchronous, making a call to <a class="Symbol" href="../Murmur/Server.html">Server</a> or <a class="Symbol" href="../Murmur/Meta.html">Meta</a> will
deadlock the server.</p>
        <h4>Derived Classes and Interfaces</h4>
        <dl>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerUpdatingAuthenticator.html">ServerUpdatingAuthenticator</a></dt>
        </dl>
        <h2>Operation Index</h2>
        <dl>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerAuthenticator.html#authenticate">authenticate</a></dt>
            <dd>
                Called to authenticate a user.</dd>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerAuthenticator.html#getInfo">getInfo</a></dt>
            <dd>
                Fetch information about a user.</dd>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerAuthenticator.html#nameToId">nameToId</a></dt>
            <dd>
                Map a name to a user id.</dd>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerAuthenticator.html#idToName">idToName</a></dt>
            <dd>
                Map a user id to a username.</dd>
            <dt class="Symbol"><a class="Symbol" href="../Murmur/ServerAuthenticator.html#idToTexture">idToTexture</a></dt>
            <dd>
                Map a user to a custom Texture.</dd>
        </dl>
        <h2>Operations</h2>
        <h3 class="Synopsis"><a name="authenticate"/>int authenticate(string name, string pw, <a class="Symbol" href="../Murmur.html#CertificateList">CertificateList</a> certificates, string certhash, bool certstrong, out string newname, out <a class="Symbol" href="../Murmur.html#GroupNameList">GroupNameList</a> groups)</h3>
        <p>
Called to authenticate a user. If you do not know the username in question, always return -2 from this
method to fall through to normal database authentication.
Note that if authentication succeeds, murmur will create a record of the user in it's database, reserving
the username and id so it cannot be used for normal database authentication.
The data in the certificate (name, email addresses etc), as well as the list of signing certificates,
should only be trusted if certstrong is true.

Internally, Murmur treats usernames as case-insensitive. It is recommended
that authenticators do the same. Murmur checks if a username is in use when
a user connects. If the connecting user is registered, the other username is
kicked. If the connecting user is not registered, the connecting user is not
allowed to join the server.</p>
        <h4>Parameters</h4>
        <dl>
            <dt class="Symbol">name</dt>
            <dd>
                Username to authenticate.</dd>
            <dt class="Symbol">pw</dt>
            <dd>
                Password to authenticate with.</dd>
            <dt class="Symbol">certificates</dt>
            <dd>
                List of der encoded certificates the user connected with.</dd>
            <dt class="Symbol">certhash</dt>
            <dd>
                Hash of user certificate, as used by murmur internally when matching.</dd>
            <dt class="Symbol">certstrong</dt>
            <dd>
                True if certificate was valid and signed by a trusted CA.</dd>
            <dt class="Symbol">newname</dt>
            <dd>
                Set this to change the username from the supplied one.</dd>
            <dt class="Symbol">groups</dt>
            <dd>
                List of groups on the root channel that the user will be added to for the duration of the connection.</dd>
        </dl>
        <h4>Return Value</h4>
        <p>UserID of authenticated user, -1 for authentication failures, -2 for unknown user (fallthrough),
-3 for authentication failures where the data could (temporarily) not be verified.</p>
        <h3 class="Synopsis"><a name="getInfo"/>bool getInfo(int id, out <a class="Symbol" href="../Murmur.html#UserInfoMap">UserInfoMap</a> info)</h3>
        <p>
Fetch information about a user. This is used to retrieve information like email address, keyhash etc. If you
want murmur to take care of this information itself, simply return false to fall through.</p>
        <h4>Parameters</h4>
        <dl>
            <dt class="Symbol">id</dt>
            <dd>
                User id.</dd>
            <dt class="Symbol">info</dt>
            <dd>
                Information about user. This needs to include at least "name".</dd>
        </dl>
        <h4>Return Value</h4>
        <p>true if information is present, false to fall through.</p>
        <h3 class="Synopsis"><a name="nameToId"/>int nameToId(string name)</h3>
        <p>
Map a name to a user id.</p>
        <h4>Parameters</h4>
        <dl>
            <dt class="Symbol">name</dt>
            <dd>
                Username to map.</dd>
        </dl>
        <h4>Return Value</h4>
        <p>User id or -2 for unknown name.</p>
        <h3 class="Synopsis"><a name="idToName"/>string idToName(int id)</h3>
        <p>
Map a user id to a username.</p>
        <h4>Parameters</h4>
        <dl>
            <dt class="Symbol">id</dt>
            <dd>
                User id to map.</dd>
        </dl>
        <h4>Return Value</h4>
        <p>Name of user or empty string for unknown id.</p>
        <h3 class="Synopsis"><a name="idToTexture"/><a class="Symbol" href="../Murmur.html#Texture">Texture</a> idToTexture(int id)</h3>
        <p>
Map a user to a custom Texture.</p>
        <h4>Parameters</h4>
        <dl>
            <dt class="Symbol">id</dt>
            <dd>
                User id to map.</dd>
        </dl>
        <h4>Return Value</h4>
        <p>User texture or an empty texture for unknwon users or users without textures.</p>
        <hr>
        <!-- SwishCommand noindex -->
        <table class="HeaderFooter">
            <tr>
                <td align="left">
                    <table>
                        <tr>
                            <td><a href="../index.html">Home</a></td>
                            <td><a href="../Murmur/Server.html">Previous</a></td>
                            <td><a href="../Murmur.html">Up</a></td>
                            <td><a href="../Murmur/ServerBootedException.html">Next</a></td>
                            <td><a href="../_sindex.html">Index</a></td>
                        </tr>
                    </table>
                </td>
                <td align="center"></td>
                <td align="right"></td>
            </tr>
        </table>
        <!-- SwishCommand index -->
        
    </body>
</html>
